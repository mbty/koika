# Included by the Makefile generated by Koika
DEFAULT_TARGET := pass
.PHONY: pass
pass:
	@:

# Makefile.platform.conf is a copy of Makefile.rv32i.conf or Makefile.rv32e.conf
-include Makefile.platform.conf

MEM_NAME ?= unit/led
MEM_PATH ?= $(test_directory)/$(MEM_NAME)

CXXFLAGS := --std=c++17
CUTTLESIM_DRIVER := rvcore.cuttlesim.cpp
CUTTLESIM_ARGS := $(MEM_PATH).rv32
CUTTLESIM_VCD_SCOPES := TOP top rv_core

# Faster GCOV runs
CUTTLESIM_COV_FLAGS := -Og -ggdb3

# Verilator config
VERILATOR_FLAGS := +define+MEM_ADDRESS_WIDTH=$(mem_address_width) +define+BRAM_RUNTIME_INIT+SIMULATION -CFLAGS -DVL_USER_FINISH
VERILATOR_DRIVER := rvcore.verilator.cpp
VERILATOR_ARGS := +VMH=$(MEM_PATH).vmh
VERILATOR_WARNINGS := -Wno-fatal
VERILATOR_TOP := top.v
# Set prefix to Vtop in all cases, to be able to switch between top and top_uart
VERILATOR_PREFIX := Vtop

# TinyFPGA config
ICE40_TOP := top_ice40_usb.v
ICE40_DEVICE := lp8k
ICE40_PACKAGE := cm81
ICE40_PCF := tinyfpga-bx.pins.pcf
ICE40_FREQUENCY := 48

# ULX3S config
ECP5_TOP := top_ulx3s.v
ECP5_DEVICE := 85k
ECP5_PACKAGE := CABGA381
ECP5_LPF := ulx3s_v20.lpf
ECP5_FREQUENCY := 25

YOSYS_OPTS := '-DMEM_FILENAME="$(MEM_PATH).vmh"' -DMEM_ADDRESS_WIDTH=$(mem_address_width)
YOSYS_LIBDIRS := .
